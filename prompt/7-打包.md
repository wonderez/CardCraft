### ç”¨æˆ·:
é¡¹ç›®èƒŒæ™¯
æˆ‘æ­£åœ¨å¼€å‘ä¸€ä¸ª Windows æ¡Œé¢åº”ç”¨ã€ŒCardCraftã€ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯ï¼š
- ç”¨æˆ·è¾“å…¥ Markdown æ–‡æœ¬
- è‡ªåŠ¨æ¸²æŸ“æˆå°çº¢ä¹¦é£æ ¼çš„ç²¾ç¾å¡ç‰‡
- æ™ºèƒ½åˆ†é¡µï¼ˆ3:4 æ¯”ä¾‹ï¼Œ1080Ã—1440pxï¼‰
- æ‰¹é‡å¯¼å‡ºé«˜è´¨é‡å›¾ç‰‡
Â 
# æŠ€æœ¯æ ˆ
- æ¡†æ¶ï¼šPySide6 (Qt for Python)
- æ¸²æŸ“ï¼šQWebEngineView (åŸºäº Chromium)
- Markdownè§£æï¼špython-markdown + æ‰©å±•
- æ ·å¼ï¼šHTML + CSS (å°çº¢ä¹¦é£æ ¼)
- åˆ†é¡µï¼šJavaScript (åœ¨ WebEngine ä¸­æ‰§è¡Œ)
Â 
# æ ¸å¿ƒæ¶æ„è®¾è®¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Â Â Â Â Â Â Â Â Â Â ä¸»çª—å£ (MainWindow) Â Â Â Â Â Â Â Â Â Â â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Â ç¼–è¾‘å™¨ç»„ä»¶ Â â”‚ Â Â é¢„è§ˆç»„ä»¶ Â Â Â â”‚ Â å·¥å…·æ  Â Â â”‚
â”‚ (QTextEdit) â”‚(QWebEngineView)â”‚ (QToolBar)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Markdownè§£æ Â â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Â HTMLç”Ÿæˆ Â Â Â â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Â æ™ºèƒ½åˆ†é¡µ Â Â Â â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Â æ ·å¼æ¸²æŸ“ Â Â Â â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Â å›¾ç‰‡å¯¼å‡º Â Â Â â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Â 
# é¡¹ç›®ç»“æ„
cardcraft/
â”œâ”€â”€ main.py Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â # å¯åŠ¨ç¨‹åºï¼Œåˆ›å»º Qt åº”ç”¨
â”œâ”€â”€ requirements.txt Â Â Â Â Â Â Â Â Â Â Â # ä¾èµ–åŒ…åˆ—è¡¨ï¼šPySide6ã€markdown ç­‰
â”‚
src/
â”œâ”€â”€ ui/
â”‚ Â Â â”œâ”€â”€ main_window.py Â Â Â Â Â Â Â Â # ä¸»çª—å£ï¼šå·¦å³åˆ†æ å¸ƒå±€ï¼Œå¯¼å‡ºæŒ‰é’®ï¼Œ300mså»¶è¿Ÿæ›´æ–°
â”‚ Â Â â”œâ”€â”€ editor_widget.py Â Â Â Â Â Â # å·¦ä¾§ç¼–è¾‘å™¨ï¼šQTextEditï¼Œå«ç¤ºä¾‹æ–‡æœ¬
â”‚ Â Â â”œâ”€â”€ preview_widget.py Â Â Â Â Â # å³ä¾§é¢„è§ˆï¼šQWebEngineViewï¼Œé›†æˆåˆ†é¡µå’Œå¯¼å‡ºåŠŸèƒ½
â”‚ Â Â 
â”œâ”€â”€ core/
â”‚ Â Â â”œâ”€â”€ markdown_processor.py Â # Markdown è½¬ HTMLï¼šä½¿ç”¨ python-markdown åº“
â”‚ Â Â â”œâ”€â”€ html_generator.py Â Â Â Â Â # ç”Ÿæˆå®Œæ•´ç½‘é¡µï¼šæ”¯æŒé¡µç ã€å¤šä¸»é¢˜CSSæ ·å¼
â”‚ Â Â 
â”œâ”€â”€ utils/
â”‚ Â Â â”œâ”€â”€ paginator.py Â Â Â Â Â Â Â Â Â Â # âœ… æ™ºèƒ½åˆ†é¡µå™¨ï¼šHTMLå…ƒç´ è§£æã€é«˜åº¦ä¼°ç®—ã€åˆ†é¡µä¼˜åŒ–
â”‚ Â Â â”œâ”€â”€ exporter.py Â Â Â Â Â Â Â Â Â Â Â # âœ… å›¾ç‰‡å¯¼å‡ºå™¨ï¼šæ‰¹é‡å¯¼å‡ºã€è¿›åº¦è¿½è¸ªã€æ°´å°æ·»åŠ 
â”‚ Â Â â”œâ”€â”€ style_manager.py Â Â Â Â Â Â # âœ… æ ·å¼ç®¡ç†å™¨ï¼šå¤šä¸»é¢˜æ”¯æŒï¼ˆå°çº¢ä¹¦/Instagram/å¾®ä¿¡/çŸ¥ä¹/æ·±è‰²ï¼‰
â”‚ Â Â 
â”œâ”€â”€ resources/
â”‚ Â Â â”œâ”€â”€ styles/ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â # ï¿½ï¿½ é¢„ç•™ï¼šæœªæ¥å¯å­˜æ”¾ç‹¬ç«‹CSSæ–‡ä»¶
â”‚ Â Â â””â”€â”€ templates/ Â Â Â Â Â Â Â Â Â Â Â Â # ï¿½ï¿½ é¢„ç•™ï¼šæœªæ¥å¯å­˜æ”¾HTMLæ¨¡æ¿æ–‡ä»¶# æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚
Â 
## 1. æ™ºèƒ½åˆ†é¡µç®—æ³•
- æ¯é¡µå›ºå®šå°ºå¯¸ï¼š1080Ã—1440px (3:4æ¯”ä¾‹)
- åˆ†é¡µåŸåˆ™ï¼š
Â Â * æ®µè½å®Œæ•´æ€§ï¼šä¸åœ¨æ®µè½ä¸­é—´åˆ†é¡µ
Â Â * æ ‡é¢˜å…³è”ï¼šæ ‡é¢˜ä¸å…¶åç»­å†…å®¹ä¿æŒåŒé¡µ
Â Â * åˆ—è¡¨è¿ç»­ï¼šåˆ—è¡¨é¡¹å°½é‡ä¸åˆ†ç¦»
Â Â * ä»£ç å®Œæ•´ï¼šä»£ç å—ä¸è·¨é¡µ
Â Â * è§†è§‰å¹³è¡¡ï¼šé¿å…é¡µé¢è¿‡ç©ºæˆ–è¿‡æ»¡
Â 
## 2. æ ·å¼ç³»ç»Ÿ
- é¢„è®¾ä¸»é¢˜ï¼šå°çº¢ä¹¦ã€Instagramã€å¾®ä¿¡ã€çŸ¥ä¹ç­‰
- æ ·å¼è¦ç´ ï¼š
Â Â * å­—ä½“ï¼šä¸­æ–‡ç”¨è‹¹æ–¹/å¾®è½¯é›…é»‘ï¼Œè¥¿æ–‡ç”¨ Helvetica
Â Â * é¢œè‰²ï¼šä¸»è‰² #FF2442ï¼Œæ–‡å­— #333333
Â Â * é—´è·ï¼šæ®µè½é—´è· 20pxï¼Œè¡Œé«˜ 1.8
Â Â * ç‰¹æ•ˆï¼šå¡ç‰‡é˜´å½±ã€åœ†è§’ã€æ¸å˜èƒŒæ™¯
Â 
## 3. æ¸²æŸ“æµç¨‹
```python
# ä¼ªä»£ç ç¤ºä¾‹
markdown_text â†’ parse_markdown() â†’ generate_html() â†’ apply_styles() â†’ paginate() â†’ render_preview() â†’ export_images()
4. å¯¼å‡ºåŠŸèƒ½
Â 
æ ¼å¼ï¼šPNG/JPEG
è´¨é‡ï¼šæ”¯æŒ 1x/2x/3x åˆ†è¾¨ç‡
å‘½åï¼šè‡ªåŠ¨ç¼–å·ï¼Œå¦‚ card_01.png, card_02.png
æ‰¹é‡ï¼šä¸€æ¬¡å¯¼å‡ºæ‰€æœ‰åˆ†é¡µ
Â 
ä»£ç è§„èŒƒ
Â 
ä½¿ç”¨ç±»å‹æ³¨è§£ (typing)
éµå¾ª PEP 8
ä¸­æ–‡æ³¨é‡Šè¯´æ˜å…³é”®é€»è¾‘
é”™è¯¯å¤„ç†è¦å®Œå–„
Â 
æ€§èƒ½è¦æ±‚
Â 
å®æ—¶é¢„è§ˆå»¶è¿Ÿ < 300ms
æ”¯æŒ 10000 å­—çš„æ–‡æ¡£
å¯¼å‡ºé€Ÿåº¦ï¼šæ¯å¼ å¡ç‰‡ < 1ç§’
Â 
é—®é¢˜æè¿°
æ‰“åŒ…çš„æ—¶å€™å‡ºç°äº†é—®é¢˜ï¼š
æœŸæœ›è¾“å‡º
è§£å†³æ–¹æ¡ˆ
paste.txt->txt->card) PS E:\wayForward\projects\RedBookCards> # å®‰è£…æ‰€æœ‰ä¾èµ–
>> pip install -r requirements.txt
Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple
Requirement already satisfied: PySide6>=6.5.0 in d:\anaconda3\envs\card\lib\site-packages (from -r requirements.txt (line 4)) (6.9.1)
Requirement already satisfied: markdown>=3.4.0 in d:\anaconda3\envs\card\lib\site-packages (from -r requirements.txt (line 6)) (3.8.2)
Requirement already satisfied: beautifulsoup4>=4.12.0 in d:\anaconda3\envs\card\lib\site-packages (from -r requirements.txt (line 7)) (4.13.4)
Requirement already satisfied: pyinstaller>=6.0.0 in d:\anaconda3\envs\card\lib\site-packages (from -r requirements.txt (line 12)) (6.15.0)
Requirement already satisfied: Pillow>=10.0.0 in d:\anaconda3\envs\card\lib\site-packages (from -r requirements.txt (line 13)) (11.3.0)
Collecting pywin32>=305 (from -r requirements.txt (line 14))
  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/5e/bf/360243b1e953bd254a82f12653974be395ba880e7ec23e3731d9f73921cc/pywin32-311-cp310-cp310-win_amd64.whl (9.6 MB)
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 9.6/9.6 MB 1.7 MB/s eta 0:00:00
Requirement already satisfied: shiboken6==6.9.1 in d:\anaconda3\envs\card\lib\site-packages (from PySide6>=6.5.0->-r requirements.txt (line 4)) (6.9.1)
Requirement already satisfied: PySide6-Essentials==6.9.1 in d:\anaconda3\envs\card\lib\site-packages (from PySide6>=6.5.0->-r requirements.txt (line 4)) (6.9.1)
Requirement already satisfied: PySide6-Addons==6.9.1 in d:\anaconda3\envs\card\lib\site-packages (from PySide6>=6.5.0->-r requirements.txt (line 4)) (6.9.1)
Requirement already satisfied: soupsieve>1.2 in d:\anaconda3\envs\card\lib\site-packages (from beautifulsoup4>=4.12.0->-r requirements.txt (line 7)) (2.7)
Requirement already satisfied: typing-extensions>=4.0.0 in d:\anaconda3\envs\card\lib\site-packages (from beautifulsoup4>=4.12.0->-r requirements.txt (line 7)) (4.14.1)
Requirement already satisfied: setuptools>=42.0.0 in d:\anaconda3\envs\card\lib\site-packages (from pyinstaller>=6.0.0->-r requirements.txt (line 12)) (78.1.1)
Requirement already satisfied: altgraph in d:\anaconda3\envs\card\lib\site-packages (from pyinstaller>=6.0.0->-r requirements.txt (line 12)) (0.17.4)
Requirement already satisfied: pefile!=2024.8.26,>=2022.5.30 in d:\anaconda3\envs\card\lib\site-packages (from pyinstaller>=6.0.0->-r requirements.txt (line 12)) (2023.2.7)
Requirement already satisfied: pywin32-ctypes>=0.2.1 in d:\anaconda3\envs\card\lib\site-packages (from pyinstaller>=6.0.0->-r requirements.txt (line 12)) (0.2.3)
Requirement already satisfied: pyinstaller-hooks-contrib>=2025.8 in d:\anaconda3\envs\card\lib\site-packages (from pyinstaller>=6.0.0->-r requirements.txt (line 12)) (2025.8)
Requirement already satisfied: packaging>=22.0 in d:\anaconda3\envs\card\lib\site-packages (from pyinstaller>=6.0.0->-r requirements.txt (line 12)) (25.0)
Installing collected packages: pywin32
Successfully installed pywin32-311
(card) PS E:\wayForward\projects\RedBookCards> python build.py

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     å°çº¢ä¹¦ Markdown ç¼–è¾‘å™¨ - æ‰“åŒ…å·¥å…·      â•‘
â•‘            Version 1.0.0              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ§¹ æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶...

ğŸ“‹ æ£€æŸ¥ä¾èµ–...
  âœ— PySide6 (ç¼ºå¤±)
  âœ“ markdown
  âœ— beautifulsoup4 (ç¼ºå¤±)
  âœ— pyinstaller (ç¼ºå¤±)
  âœ— Pillow (ç¼ºå¤±)

âš ï¸  ç¼ºå°‘ä¾èµ–åŒ…: PySide6, beautifulsoup4, pyinstaller, Pillow
è¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…:
  pip install PySide6 beautifulsoup4 pyinstaller Pillow

âŒ è¯·å…ˆå®‰è£…ç¼ºå¤±çš„ä¾èµ–åŒ…
(card) PS E:\wayForward\projects\RedBookCards> pip install PySide6 beautifulsoup4 pyinstaller Pillow
Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple
Requirement already satisfied: PySide6 in d:\anaconda3\envs\card\lib\site-packages (6.9.1)
Requirement already satisfied: beautifulsoup4 in d:\anaconda3\envs\card\lib\site-packages (4.13.4)
Requirement already satisfied: pyinstaller in d:\anaconda3\envs\card\lib\site-packages (6.15.0)
Requirement already satisfied: Pillow in d:\anaconda3\envs\card\lib\site-packages (11.3.0)
Requirement already satisfied: shiboken6==6.9.1 in d:\anaconda3\envs\card\lib\site-packages (from PySide6) (6.9.1)
Requirement already satisfied: PySide6-Essentials==6.9.1 in d:\anaconda3\envs\card\lib\site-packages (from PySide6) (6.9.1)
Requirement already satisfied: PySide6-Addons==6.9.1 in d:\anaconda3\envs\card\lib\site-packages (from PySide6) (6.9.1)
Requirement already satisfied: soupsieve>1.2 in d:\anaconda3\envs\card\lib\site-packages (from beautifulsoup4) (2.7)
Requirement already satisfied: typing-extensions>=4.0.0 in d:\anaconda3\envs\card\lib\site-packages (from beautifulsoup4) (4.14.1)
Requirement already satisfied: setuptools>=42.0.0 in d:\anaconda3\envs\card\lib\site-packages (from pyinstaller) (78.1.1)
Requirement already satisfied: altgraph in d:\anaconda3\envs\card\lib\site-packages (from pyinstaller) (0.17.4)
Requirement already satisfied: pefile!=2024.8.26,>=2022.5.30 in d:\anaconda3\envs\card\lib\site-packages (from pyinstaller) (2023.2.7)
Requirement already satisfied: pywin32-ctypes>=0.2.1 in d:\anaconda3\envs\card\lib\site-packages (from pyinstaller) (0.2.3)
Requirement already satisfied: pyinstaller-hooks-contrib>=2025.8 in d:\anaconda3\envs\card\lib\site-packages (from pyinstaller) (2025.8)
Requirement already satisfied: packaging>=22.0 in d:\anaconda3\envs\card\lib\site-packages (from pyinstaller) (25.0)
(card) PS E:\wayForward\projects\RedBookCards> python build.py

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     å°çº¢ä¹¦ Markdown ç¼–è¾‘å™¨ - æ‰“åŒ…å·¥å…·      â•‘
â•‘            Version 1.0.0              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ§¹ æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶...

ğŸ“‹ æ£€æŸ¥ä¾èµ–...
  âœ— PySide6 (ç¼ºå¤±)
  âœ“ markdown
  âœ— beautifulsoup4 (ç¼ºå¤±)
  âœ— pyinstaller (ç¼ºå¤±)
  âœ— Pillow (ç¼ºå¤±)

âš ï¸  ç¼ºå°‘ä¾èµ–åŒ…: PySide6, beautifulsoup4, pyinstaller, Pillow
è¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…:
  pip install PySide6 beautifulsoup4 pyinstaller Pillow

âŒ è¯·å…ˆå®‰è£…ç¼ºå¤±çš„ä¾èµ–åŒ… build.py->text/plain->#!/usr/bin/env python
# -*- coding: utf-8 -*-
# ============================================
# build.py - è‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬
# ============================================

import os
import sys
import shutil
import subprocess
from pathlib import Path
import zipfile
from datetime import datetime

class AppBuilder:
    """åº”ç”¨æ‰“åŒ…å™¨"""
    
    def __init__(self):
        self.root_dir = Path.cwd()
        self.build_dir = self.root_dir / "build"
        self.dist_dir = self.root_dir / "dist"
        self.resources_dir = self.root_dir / "resources"
        self.icons_dir = self.resources_dir / "icons"
        
        # åº”ç”¨ä¿¡æ¯
        self.app_name = "XiaohongshuEditor"
        self.app_version = "1.0.0"
        self.app_description = "å°çº¢ä¹¦ Markdown ç¼–è¾‘å™¨"
        
    def clean_build(self):
        """æ¸…ç†ä¹‹å‰çš„æ„å»ºæ–‡ä»¶"""
        print("ğŸ§¹ æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶...")
        
        # åˆ é™¤æ„å»ºç›®å½•
        if self.build_dir.exists():
            shutil.rmtree(self.build_dir)
            print(f"  âœ“ åˆ é™¤ {self.build_dir}")
            
        if self.dist_dir.exists():
            shutil.rmtree(self.dist_dir)
            print(f"  âœ“ åˆ é™¤ {self.dist_dir}")
            
        # åˆ é™¤ä¸´æ—¶æ–‡ä»¶
        for pattern in ["*.pyc", "__pycache__", ".pytest_cache"]:
            for file in self.root_dir.rglob(pattern):
                if file.is_file():
                    file.unlink()
                elif file.is_dir():
                    shutil.rmtree(file)
                    
    def check_requirements(self):
        """æ£€æŸ¥ä¾èµ–"""
        print("\nğŸ“‹ æ£€æŸ¥ä¾èµ–...")
        
        required_packages = [
            "PySide6",
            "markdown", 
            "beautifulsoup4",
            "pyinstaller",
            "Pillow"  # ç”¨äºç”Ÿæˆå›¾æ ‡
        ]
        
        missing = []
        for package in required_packages:
            try:
                __import__(package.lower().replace("-", "_"))
                print(f"  âœ“ {package}")
            except ImportError:
                missing.append(package)
                print(f"  âœ— {package} (ç¼ºå¤±)")
                
        if missing:
            print(f"\nâš ï¸  ç¼ºå°‘ä¾èµ–åŒ…: {', '.join(missing)}")
            print("è¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…:")
            print(f"  pip install {' '.join(missing)}")
            return False
            
        return True
        
    def create_icon(self):
        """åˆ›å»ºåº”ç”¨å›¾æ ‡"""
        print("\nğŸ¨ ç”Ÿæˆåº”ç”¨å›¾æ ‡...")
        
        # ç¡®ä¿å›¾æ ‡ç›®å½•å­˜åœ¨
        self.icons_dir.mkdir(parents=True, exist_ok=True)
        
        # æ£€æŸ¥æ˜¯å¦å·²æœ‰å›¾æ ‡
        ico_file = self.icons_dir / "app.ico"
        if ico_file.exists():
            print(f"  âœ“ å›¾æ ‡å·²å­˜åœ¨: {ico_file}")
            return True
            
        # è¿è¡Œå›¾æ ‡ç”Ÿæˆè„šæœ¬
        icon_script = self.root_dir / "create_icon.py"
        if icon_script.exists():
            try:
                subprocess.run([sys.executable, str(icon_script)], check=True)
                print("  âœ“ å›¾æ ‡ç”ŸæˆæˆåŠŸ")
                return True
            except subprocess.CalledProcessError:
                print("  âš ï¸  å›¾æ ‡ç”Ÿæˆå¤±è´¥ï¼Œå°†ä½¿ç”¨é»˜è®¤å›¾æ ‡")
                return False
        else:
            print("  âš ï¸  æ‰¾ä¸åˆ°å›¾æ ‡ç”Ÿæˆè„šæœ¬")
            return False
            
    def build_exe(self, mode="onefile"):
        """æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶
        
        Args:
            mode: "onefile" - å•æ–‡ä»¶æ¨¡å¼, "onedir" - æ–‡ä»¶å¤¹æ¨¡å¼
        """
        print(f"\nğŸ”¨ å¼€å§‹æ„å»º ({mode} æ¨¡å¼)...")
        
        # PyInstaller å‘½ä»¤
        cmd = [
            sys.executable, "-m", "PyInstaller",
            "--clean",  # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
            "--noconfirm",  # è¦†ç›–è¾“å‡ºç›®å½•
        ]
        
        # æ ¹æ®æ¨¡å¼æ·»åŠ å‚æ•°
        if mode == "onefile":
            cmd.append("--onefile")
        else:
            cmd.append("--onedir")
            
        # æ·»åŠ å…¶ä»–å‚æ•°
        cmd.extend([
            "--windowed",  # çª—å£ç¨‹åºï¼ˆæ— æ§åˆ¶å°ï¼‰
            "--name", self.app_name,
            "--icon", str(self.icons_dir / "app.ico") if (self.icons_dir / "app.ico").exists() else "NONE",
            "--add-data", f"{self.resources_dir};resources",  # Windowsç”¨åˆ†å·
        ])
        
        # æ·»åŠ éšè—å¯¼å…¥
        hidden_imports = [
            "PySide6.QtWebEngineCore",
            "PySide6.QtWebEngineWidgets",
            "markdown.extensions.fenced_code",
            "markdown.extensions.tables",
            "markdown.extensions.nl2br",
            "markdown.extensions.attr_list",
            "markdown.extensions.def_list",
            "markdown.extensions.footnotes",
            "markdown.extensions.toc",
            "markdown.extensions.sane_lists",
            "markdown.extensions.smarty",
        ]
        
        for imp in hidden_imports:
            cmd.extend(["--hidden-import", imp])
            
        # æ’é™¤ä¸éœ€è¦çš„æ¨¡å—
        excludes = ["tkinter", "matplotlib", "numpy", "pandas", "scipy"]
        for exc in excludes:
            cmd.extend(["--exclude-module", exc])
            
        # æ·»åŠ ä¸»è„šæœ¬
        cmd.append("main.py")
        
        # æ‰§è¡Œæ‰“åŒ…
        print(f"  æ‰§è¡Œå‘½ä»¤: {' '.join(cmd)}")
        
        try:
            result = subprocess.run(cmd, capture_output=True, text=True)
            
            if result.returncode == 0:
                print("  âœ“ æ„å»ºæˆåŠŸï¼")
                return True
            else:
                print("  âœ— æ„å»ºå¤±è´¥")
                print(f"  é”™è¯¯ä¿¡æ¯: {result.stderr}")
                return False
                
        except Exception as e:
            print(f"  âœ— æ„å»ºå‡ºé”™: {e}")
            return False
            
    def create_installer(self):
        """åˆ›å»ºå®‰è£…åŒ…ï¼ˆå¯é€‰ï¼‰"""
        print("\nğŸ“¦ åˆ›å»ºä¾¿æºç‰ˆå‹ç¼©åŒ…...")
        
        # ç¡®å®šè¾“å‡ºæ–‡ä»¶å
        timestamp = datetime.now().strftime("%Y%m%d")
        zip_name = f"{self.app_name}_v{self.app_version}_{timestamp}.zip"
        zip_path = self.dist_dir / zip_name
        
        # æŸ¥æ‰¾exeæ–‡ä»¶
        exe_path = self.dist_dir / f"{self.app_name}.exe"
        if not exe_path.exists():
            # å¦‚æœæ˜¯æ–‡ä»¶å¤¹æ¨¡å¼
            exe_path = self.dist_dir / self.app_name / f"{self.app_name}.exe"
            
        if not exe_path.exists():
            print(f"  âœ— æ‰¾ä¸åˆ°å¯æ‰§è¡Œæ–‡ä»¶")
            return False
            
        # åˆ›å»ºå‹ç¼©åŒ…
        with zipfile.ZipFile(zip_path, 'w', zipfile.ZIP_DEFLATED) as zipf:
            if exe_path.parent == self.dist_dir:
                # å•æ–‡ä»¶æ¨¡å¼
                zipf.write(exe_path, exe_path.name)
                print(f"  æ·»åŠ : {exe_path.name}")
            else:
                # æ–‡ä»¶å¤¹æ¨¡å¼
                for file in exe_path.parent.rglob("*"):
                    if file.is_file():
                        arcname = file.relative_to(exe_path.parent.parent)
                        zipf.write(file, arcname)
                        
        print(f"  âœ“ å‹ç¼©åŒ…åˆ›å»ºæˆåŠŸ: {zip_path}")
        print(f"  å¤§å°: {zip_path.stat().st_size / 1024 / 1024:.2f} MB")
        return True
        
    def create_shortcuts(self):
        """åˆ›å»ºå¿«æ·æ–¹å¼ï¼ˆWindowsï¼‰"""
        print("\nğŸ”— åˆ›å»ºå¿«æ·æ–¹å¼...")
        
        try:
            import win32com.client
            
            shell = win32com.client.Dispatch("WScript.Shell")
            
            # æ¡Œé¢å¿«æ·æ–¹å¼
            desktop = shell.SpecialFolders("Desktop")
            shortcut_path = os.path.join(desktop, f"{self.app_description}.lnk")
            
            shortcut = shell.CreateShortCut(shortcut_path)
            shortcut.Targetpath = str(self.dist_dir / f"{self.app_name}.exe")
            shortcut.WorkingDirectory = str(self.dist_dir)
            shortcut.IconLocation = str(self.icons_dir / "app.ico") if (self.icons_dir / "app.ico").exists() else shortcut.Targetpath
            shortcut.Description = self.app_description
            shortcut.save()
            
            print(f"  âœ“ æ¡Œé¢å¿«æ·æ–¹å¼åˆ›å»ºæˆåŠŸ")
            return True
            
        except ImportError:
            print("  âš ï¸  éœ€è¦ pywin32 æ¥åˆ›å»ºå¿«æ·æ–¹å¼")
            print("  è¿è¡Œ: pip install pywin32")
            return False
        except Exception as e:
            print(f"  âš ï¸  åˆ›å»ºå¿«æ·æ–¹å¼å¤±è´¥: {e}")
            return False
            
    def run(self, mode="onefile", create_zip=True, create_shortcut=False):
        """è¿è¡Œå®Œæ•´çš„æ‰“åŒ…æµç¨‹"""
        print(f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     å°çº¢ä¹¦ Markdown ç¼–è¾‘å™¨ - æ‰“åŒ…å·¥å…·      â•‘
â•‘            Version {self.app_version}              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        """)
        
        # 1. æ¸…ç†
        self.clean_build()
        
        # 2. æ£€æŸ¥ä¾èµ–
        if not self.check_requirements():
            print("\nâŒ è¯·å…ˆå®‰è£…ç¼ºå¤±çš„ä¾èµ–åŒ…")
            return False
            
        # 3. åˆ›å»ºå›¾æ ‡
        self.create_icon()
        
        # 4. æ„å»ºexe
        if not self.build_exe(mode):
            print("\nâŒ æ„å»ºå¤±è´¥")
            return False
            
        # 5. åˆ›å»ºå‹ç¼©åŒ…
        if create_zip:
            self.create_installer()
            
        # 6. åˆ›å»ºå¿«æ·æ–¹å¼
        if create_shortcut and sys.platform == "win32":
            self.create_shortcuts()
            
        # å®Œæˆ
        print(f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              âœ… æ‰“åŒ…å®Œæˆï¼                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ è¾“å‡ºç›®å½•: {self.dist_dir}
ğŸ“„ å¯æ‰§è¡Œæ–‡ä»¶: {self.app_name}.exe

è¿è¡Œæ–¹å¼:
  1. ç›´æ¥åŒå‡» {self.app_name}.exe
  2. æˆ–ä»å‘½ä»¤è¡Œè¿è¡Œ: .\\dist\\{self.app_name}.exe

æç¤º:
  - é¦–æ¬¡è¿è¡Œå¯èƒ½éœ€è¦å‡ ç§’é’ŸåŠ è½½
  - ç¡®ä¿ç³»ç»Ÿå·²å®‰è£… Microsoft Visual C++ Redistributable
  - å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ build/build.log
        """)
        
        return True

def main():
    """ä¸»å‡½æ•°"""
    import argparse
    
    parser = argparse.ArgumentParser(description="å°çº¢ä¹¦ Markdown ç¼–è¾‘å™¨æ‰“åŒ…å·¥å…·")
    parser.add_argument(
        "--mode", 
        choices=["onefile", "onedir"], 
        default="onefile",
        help="æ‰“åŒ…æ¨¡å¼: onefile=å•æ–‡ä»¶, onedir=æ–‡ä»¶å¤¹"
    )
    parser.add_argument(
        "--no-zip",
        action="store_true",
        help="ä¸åˆ›å»ºå‹ç¼©åŒ…"
    )
    parser.add_argument(
        "--shortcut",
        action="store_true", 
        help="åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼"
    )
    
    args = parser.parse_args()
    
    # åˆ›å»ºæ‰“åŒ…å™¨
    builder = AppBuilder()
    
    # è¿è¡Œæ‰“åŒ…
    success = builder.run(
        mode=args.mode,
        create_zip=not args.no_zip,
        create_shortcut=args.shortcut
    )
    
    sys.exit(0 if success else 1)

if __name__ == "__main__":
    main() create_icon.py->text/plain-># ============================================
# create_icon.py - ç”Ÿæˆåº”ç”¨å›¾æ ‡
# ============================================
from PIL import Image, ImageDraw, ImageFont
import os
from pathlib import Path

def create_app_icon():
    """åˆ›å»ºå°çº¢ä¹¦é£æ ¼çš„åº”ç”¨å›¾æ ‡"""
    
    # åˆ›å»ºå›¾æ ‡ç›®å½•
    icon_dir = Path("resources/icons")
    icon_dir.mkdir(parents=True, exist_ok=True)
    
    # å®šä¹‰æ‰€éœ€çš„å›¾æ ‡å°ºå¯¸
    sizes = [16, 32, 48, 64, 128, 256, 512]
    
    # åˆ›å»ºæœ€å¤§å°ºå¯¸çš„å›¾æ ‡ä½œä¸ºåŸºç¡€
    base_size = 512
    img = Image.new('RGBA', (base_size, base_size), (0, 0, 0, 0))
    draw = ImageDraw.Draw(img)
    
    # ç»˜åˆ¶èƒŒæ™¯æ¸å˜ï¼ˆæ¨¡æ‹Ÿå°çº¢ä¹¦é£æ ¼ï¼‰
    for y in range(base_size):
        # ä»ç²‰è‰²åˆ°çº¢è‰²çš„æ¸å˜
        ratio = y / base_size
        r = int(255 - ratio * 20)
        g = int(36 + ratio * 40)
        b = int(66 + ratio * 20)
        draw.rectangle([(0, y), (base_size, y + 1)], fill=(r, g, b, 255))
    
    # æ·»åŠ åœ†è§’æ•ˆæœ
    mask = Image.new('L', (base_size, base_size), 0)
    mask_draw = ImageDraw.Draw(mask)
    corner_radius = 100
    mask_draw.rounded_rectangle([(0, 0), (base_size, base_size)], 
                                radius=corner_radius, fill=255)
    
    # åº”ç”¨é®ç½©
    output = Image.new('RGBA', (base_size, base_size), (0, 0, 0, 0))
    output.paste(img, (0, 0))
    output.putalpha(mask)
    img = output
    draw = ImageDraw.Draw(img)
    
    # ç»˜åˆ¶ä¸­å¿ƒçš„ "M" æ ‡è®°ï¼ˆä»£è¡¨ Markdownï¼‰
    try:
        # å°è¯•ä½¿ç”¨ç³»ç»Ÿå­—ä½“
        font_size = 280
        try:
            # Windows
            font = ImageFont.truetype("arial.ttf", font_size)
        except:
            try:
                # å°è¯•å…¶ä»–å¸¸è§å­—ä½“
                font = ImageFont.truetype("Arial.ttf", font_size)
            except:
                # ä½¿ç”¨é»˜è®¤å­—ä½“
                font = ImageFont.load_default()
    except:
        font = ImageFont.load_default()
    
    # ç»˜åˆ¶ç™½è‰²çš„ "M" å­—æ¯
    text = "M"
    # è·å–æ–‡æœ¬è¾¹ç•Œæ¡†
    bbox = draw.textbbox((0, 0), text, font=font)
    text_width = bbox[2] - bbox[0]
    text_height = bbox[3] - bbox[1]
    
    # è®¡ç®—å±…ä¸­ä½ç½®
    x = (base_size - text_width) // 2
    y = (base_size - text_height) // 2 - 20  # ç¨å¾®ä¸Šç§»
    
    # æ·»åŠ é˜´å½±æ•ˆæœ
    shadow_offset = 8
    draw.text((x + shadow_offset, y + shadow_offset), text, 
             fill=(0, 0, 0, 100), font=font)
    
    # ç»˜åˆ¶ä¸»æ–‡å­—
    draw.text((x, y), text, fill=(255, 255, 255, 255), font=font)
    
    # æ·»åŠ å°çš„è£…é¥°å…ƒç´  - å°çº¢ä¹¦é£æ ¼çš„ç¬”è®°æœ¬çº¿æ¡
    line_color = (255, 255, 255, 80)
    line_width = 3
    line_spacing = 40
    
    # åº•éƒ¨è£…é¥°çº¿
    for i in range(3):
        y_pos = base_size - 80 - (i * line_spacing)
        draw.rectangle([(60, y_pos), (base_size - 60, y_pos + line_width)], 
                      fill=line_color)
    
    # ç”Ÿæˆä¸åŒå°ºå¯¸çš„å›¾æ ‡
    icons = {}
    for size in sizes:
        resized = img.resize((size, size), Image.Resampling.LANCZOS)
        icon_path = icon_dir / f"icon_{size}x{size}.png"
        resized.save(icon_path, 'PNG')
        icons[size] = icon_path
        print(f"Created: {icon_path}")
    
    # ç”Ÿæˆ ICO æ–‡ä»¶ï¼ˆWindowséœ€è¦ï¼‰
    ico_path = icon_dir / "app.ico"
    img.save(ico_path, format='ICO', sizes=[(s, s) for s in [16, 32, 48, 64, 128, 256]])
    print(f"Created: {ico_path}")
    
    # ä¿å­˜åŸå§‹å¤§å›¾æ ‡
    original_path = icon_dir / "icon_original.png"
    img.save(original_path, 'PNG')
    print(f"Created: {original_path}")
    
    return ico_path

def create_simple_icon_alternative():
    """åˆ›å»ºç®€åŒ–ç‰ˆå›¾æ ‡ï¼ˆå¦‚æœæ²¡æœ‰PILåº“ï¼‰"""
    import tkinter as tk
    from tkinter import Canvas
    import base64
    
    # åˆ›å»ºå›¾æ ‡ç›®å½•
    icon_dir = Path("resources/icons")
    icon_dir.mkdir(parents=True, exist_ok=True)
    
    # ä½¿ç”¨tkinteråˆ›å»ºç®€å•å›¾æ ‡
    root = tk.Tk()
    root.withdraw()
    
    size = 256
    canvas = Canvas(root, width=size, height=size)
    
    # ç»˜åˆ¶æ¸å˜èƒŒæ™¯ï¼ˆç®€åŒ–ç‰ˆï¼‰
    for i in range(size):
        color_val = int(255 - (i / size) * 50)
        color = f'#{color_val:02x}{int(36 + (i/size)*40):02x}{int(66 + (i/size)*20):02x}'
        canvas.create_line(0, i, size, i, fill=color)
    
    # ç»˜åˆ¶ M å­—æ¯
    canvas.create_text(size//2, size//2, text="M", 
                       font=("Arial", 120, "bold"), 
                       fill="white")
    
    # ä¿å­˜ä¸ºPostScriptç„¶åè½¬æ¢
    ps_file = icon_dir / "temp.ps"
    canvas.postscript(file=str(ps_file))
    
    print("Simple icon created (requires manual conversion from PS to ICO)")
    return None

if __name__ == "__main__":
    try:
        # å°è¯•ä½¿ç”¨PILåˆ›å»ºé«˜è´¨é‡å›¾æ ‡
        from PIL import Image, ImageDraw, ImageFont
        ico_path = create_app_icon()
        print(f"\nâœ… åº”ç”¨å›¾æ ‡åˆ›å»ºæˆåŠŸï¼")
        print(f"ICOæ–‡ä»¶ä½ç½®: {ico_path}")
    except ImportError:
        print("âš ï¸ éœ€è¦å®‰è£… Pillow åº“æ¥ç”Ÿæˆå›¾æ ‡")
        print("è¯·è¿è¡Œ: pip install Pillow")
        print("\nå°è¯•åˆ›å»ºç®€åŒ–ç‰ˆå›¾æ ‡...")
        create_simple_icon_alternative() main.py->text/plain-># main.py
import sys
from PySide6.QtWidgets import QApplication
from PySide6.QtCore import Qt
from src.ui.main_window import MainWindow

def main():
    # å¯ç”¨é«˜DPIæ”¯æŒ
    QApplication.setHighDpiScaleFactorRoundingPolicy(
        Qt.HighDpiScaleFactorRoundingPolicy.PassThrough
    )
    
    app = QApplication(sys.argv)
    app.setStyle("Fusion")  # ä½¿ç”¨ Fusion é£æ ¼
    
    # è®¾ç½®åº”ç”¨ç¨‹åºæ ·å¼
    app.setStyleSheet("""
        QMainWindow {
            background-color: #f5f5f7;
        }
    """)
    
    window = MainWindow()
    window.show()
    
    sys.exit(app.exec())

if __name__ == "__main__":
    main() README.md->-># RedBookCards
 requirements.txt->text/plain-># ============================================
# è¿è¡Œæ—¶ä¾èµ–
# ============================================
PySide6>=6.5.0
# æ³¨æ„ï¼šPySide6-WebEngine å·²ç»åŒ…å«åœ¨ PySide6 ä¸­ï¼Œæ— éœ€å•ç‹¬å®‰è£…
markdown>=3.4.0
beautifulsoup4>=4.12.0

# ============================================
# å¼€å‘å’Œæ‰“åŒ…ä¾èµ–
# ============================================
pyinstaller>=6.0.0  # æ‰“åŒ…å·¥å…·
Pillow>=10.0.0  # å›¾æ ‡ç”Ÿæˆ
pywin32>=305; sys_platform == 'win32'  # Windowså¿«æ·æ–¹å¼ï¼ˆå¯é€‰ï¼‰

# ============================================
# å¯é€‰ä¾èµ–ï¼ˆæå‡ä½“éªŒï¼‰
# ============================================
# lxml>=4.9.0  # æ›´å¿«çš„HTMLè§£æï¼ˆå¯é€‰ï¼‰ version_info.txt->text/plain-># UTF-8
#
# ç‰ˆæœ¬ä¿¡æ¯æ–‡ä»¶
# ç”¨äº Windows å¯æ‰§è¡Œæ–‡ä»¶çš„ç‰ˆæœ¬ä¿¡æ¯
#
VSVersionInfo(
  ffi=FixedFileInfo(
    # ç‰ˆæœ¬å·ï¼šä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢ç‰ˆ.æ„å»ºç‰ˆ
    filevers=(1, 0, 0, 0),
    prodvers=(1, 0, 0, 0),
    # æ–‡ä»¶æ ‡å¿—
    mask=0x3f,
    flags=0x0,
    # æ“ä½œç³»ç»Ÿ
    OS=0x40004,
    # æ–‡ä»¶ç±»å‹
    fileType=0x1,
    subtype=0x0,
    date=(0, 0)
  ),
  kids=[
    StringFileInfo(
      [
      StringTable(
        u'080404B0',
        [StringStruct(u'CompanyName', u'RedBook Studio'),
        StringStruct(u'FileDescription', u'å°çº¢ä¹¦ Markdown ç¼–è¾‘å™¨ - å°† Markdown è½¬æ¢ä¸ºç²¾ç¾çš„å°çº¢ä¹¦é£æ ¼å¡ç‰‡'),
        StringStruct(u'FileVersion', u'1.0.0.0'),
        StringStruct(u'InternalName', u'XiaohongshuEditor'),
        StringStruct(u'LegalCopyright', u'Copyright Â© 2024 RedBook Studio. All rights reserved.'),
        StringStruct(u'OriginalFilename', u'XiaohongshuEditor.exe'),
        StringStruct(u'ProductName', u'å°çº¢ä¹¦ Markdown ç¼–è¾‘å™¨'),
        StringStruct(u'ProductVersion', u'1.0.0')])
      ]), 
    VarFileInfo([VarStruct(u'Translation', [2052, 1200])])
  ]
)
### ç³»ç»Ÿ:
çœ‹åˆ°æ‚¨åœ¨æ‰“åŒ…å°çº¢ä¹¦ Markdown ç¼–è¾‘å™¨æ—¶é‡åˆ°äº†é—®é¢˜ã€‚ä»æ—¥å¿—ä¸­å¯ä»¥çœ‹å‡ºï¼Œä¸»è¦é—®é¢˜æ˜¯ `build.py` è„šæœ¬æ£€æµ‹ä¾èµ–åŒ…æ—¶å‡ºç°äº†è¯¯åˆ¤ - æ˜æ˜å·²ç»å®‰è£…äº†æ‰€æœ‰ä¾èµ–ï¼Œä½†è„šæœ¬ä»ç„¶æŠ¥å‘Šç¼ºå¤±ã€‚

è®©æˆ‘å¸®æ‚¨ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼š ä»£ç 
```python
#!/usr/bin/env python
# -*- coding: utf-8 -*-
# ============================================
# build.py - è‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬ï¼ˆä¿®å¤ç‰ˆï¼‰
# ============================================

import os
import sys
import shutil
import subprocess
from pathlib import Path
import zipfile
from datetime import datetime
import importlib.util
import pkg_resources

class AppBuilder:
    """åº”ç”¨æ‰“åŒ…å™¨"""
    
    def __init__(self):
        self.root_dir = Path.cwd()
        self.build_dir = self.root_dir / "build"
        self.dist_dir = self.root_dir / "dist"
        self.resources_dir = self.root_dir / "resources"
        self.icons_dir = self.resources_dir / "icons"
        
        # åº”ç”¨ä¿¡æ¯
        self.app_name = "XiaohongshuEditor"
        self.app_version = "1.0.0"
        self.app_description = "å°çº¢ä¹¦ Markdown ç¼–è¾‘å™¨"
        
    def clean_build(self):
        """æ¸…ç†ä¹‹å‰çš„æ„å»ºæ–‡ä»¶"""
        print("ğŸ§¹ æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶...")
        
        # åˆ é™¤æ„å»ºç›®å½•
        if self.build_dir.exists():
            shutil.rmtree(self.build_dir)
            print(f"  âœ“ åˆ é™¤ {self.build_dir}")
            
        if self.dist_dir.exists():
            shutil.rmtree(self.dist_dir)
            print(f"  âœ“ åˆ é™¤ {self.dist_dir}")
            
        # åˆ é™¤ spec æ–‡ä»¶
        spec_file = self.root_dir / f"{self.app_name}.spec"
        if spec_file.exists():
            spec_file.unlink()
            print(f"  âœ“ åˆ é™¤ {spec_file}")
            
        # åˆ é™¤ä¸´æ—¶æ–‡ä»¶
        for pattern in ["*.pyc", "__pycache__", ".pytest_cache"]:
            for file in self.root_dir.rglob(pattern):
                if file.is_file():
                    file.unlink()
                elif file.is_dir():
                    shutil.rmtree(file)
                    
    def check_requirements(self):
        """æ£€æŸ¥ä¾èµ–ï¼ˆæ”¹è¿›ç‰ˆï¼‰"""
        print("\nğŸ“‹ æ£€æŸ¥ä¾èµ–...")
        
        # ä¾èµ–åŒ…æ˜ å°„ï¼ˆåŒ…å -> å¯¼å…¥åï¼‰
        package_mapping = {
            "PySide6": "PySide6",
            "markdown": "markdown",
            "beautifulsoup4": "bs4",  # beautifulsoup4 å®é™…å¯¼å…¥åæ˜¯ bs4
            "pyinstaller": "PyInstaller",  # æ³¨æ„å¤§å°å†™
            "Pillow": "PIL"  # Pillow å®é™…å¯¼å…¥åæ˜¯ PIL
        }
        
        missing = []
        
        for package_name, import_name in package_mapping.items():
            try:
                # æ–¹æ³•1ï¼šå°è¯•ä½¿ç”¨ pkg_resources æ£€æŸ¥
                try:
                    pkg_resources.get_distribution(package_name)
                    found = True
                except pkg_resources.DistributionNotFound:
                    found = False
                
                # æ–¹æ³•2ï¼šå¦‚æœæ–¹æ³•1å¤±è´¥ï¼Œå°è¯•å¯¼å…¥
                if not found:
                    spec = importlib.util.find_spec(import_name)
                    found = spec is not None
                
                # æ–¹æ³•3ï¼šå¯¹äºç‰¹æ®ŠåŒ…çš„é¢å¤–æ£€æŸ¥
                if not found and import_name == "PyInstaller":
                    # PyInstaller å¯èƒ½ä½œä¸ºå‘½ä»¤è¡Œå·¥å…·å®‰è£…
                    result = subprocess.run(
                        [sys.executable, "-m", "PyInstaller", "--version"],
                        capture_output=True,
                        text=True
                    )
                    found = result.returncode == 0
                
                if found:
                    print(f"  âœ“ {package_name}")
                else:
                    missing.append(package_name)
                    print(f"  âœ— {package_name} (ç¼ºå¤±)")
                    
            except Exception as e:
                # å¦‚æœæ£€æŸ¥è¿‡ç¨‹å‡ºé”™ï¼Œå°è¯•ç›´æ¥å¯¼å…¥
                try:
                    __import__(import_name)
                    print(f"  âœ“ {package_name}")
                except ImportError:
                    missing.append(package_name)
                    print(f"  âœ— {package_name} (ç¼ºå¤±) - {e}")
                
        if missing:
            print(f"\nâš ï¸  ç¼ºå°‘ä¾èµ–åŒ…: {', '.join(missing)}")
            print("è¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…:")
            print(f"  pip install {' '.join(missing)}")
            return False
            
        return True
        
    def verify_main_script(self):
        """éªŒè¯ä¸»è„šæœ¬æ˜¯å¦å­˜åœ¨"""
        print("\nğŸ“ éªŒè¯ä¸»è„šæœ¬...")
        
        main_script = self.root_dir / "main.py"
        if not main_script.exists():
            print(f"  âœ— æ‰¾ä¸åˆ° main.py")
            print("  è¯·ç¡®ä¿ main.py åœ¨é¡¹ç›®æ ¹ç›®å½•")
            return False
            
        print(f"  âœ“ æ‰¾åˆ° main.py")
        
        # æ£€æŸ¥ src ç›®å½•ç»“æ„
        src_dir = self.root_dir / "src"
        if not src_dir.exists():
            print(f"  âš ï¸  æ‰¾ä¸åˆ° src ç›®å½•ï¼Œå°†åˆ›å»ºåŸºæœ¬ç»“æ„")
            self.create_basic_structure()
            
        return True
        
    def create_basic_structure(self):
        """åˆ›å»ºåŸºæœ¬çš„é¡¹ç›®ç»“æ„"""
        print("\nğŸ—ï¸  åˆ›å»ºåŸºæœ¬é¡¹ç›®ç»“æ„...")
        
        # åˆ›å»ºç›®å½•
        dirs = [
            "src/ui",
            "src/core",
            "src/utils",
            "resources/styles",
            "resources/templates",
            "resources/icons"
        ]
        
        for dir_path in dirs:
            path = self.root_dir / dir_path
            path.mkdir(parents=True, exist_ok=True)
            print(f"  âœ“ åˆ›å»ºç›®å½•: {dir_path}")
            
        # åˆ›å»º __init__.py æ–‡ä»¶
        for dir_path in ["src", "src/ui", "src/core", "src/utils"]:
            init_file = self.root_dir / dir_path / "__init__.py"
            if not init_file.exists():
                init_file.write_text("# -*- coding: utf-8 -*-\n")
                print(f"  âœ“ åˆ›å»ºæ–‡ä»¶: {dir_path}/__init__.py")
                
    def create_icon(self):
        """åˆ›å»ºåº”ç”¨å›¾æ ‡"""
        print("\nğŸ¨ ç”Ÿæˆåº”ç”¨å›¾æ ‡...")
        
        # ç¡®ä¿å›¾æ ‡ç›®å½•å­˜åœ¨
        self.icons_dir.mkdir(parents=True, exist_ok=True)
        
        # æ£€æŸ¥æ˜¯å¦å·²æœ‰å›¾æ ‡
        ico_file = self.icons_dir / "app.ico"
        if ico_file.exists():
            print(f"  âœ“ å›¾æ ‡å·²å­˜åœ¨: {ico_file}")
            return True
            
        # è¿è¡Œå›¾æ ‡ç”Ÿæˆè„šæœ¬
        icon_script = self.root_dir / "create_icon.py"
        if icon_script.exists():
            try:
                subprocess.run([sys.executable, str(icon_script)], check=True)
                print("  âœ“ å›¾æ ‡ç”ŸæˆæˆåŠŸ")
                return True
            except subprocess.CalledProcessError as e:
                print(f"  âš ï¸  å›¾æ ‡ç”Ÿæˆå¤±è´¥: {e}")
                print("  å°†ç»§ç»­æ‰“åŒ…ï¼ˆä½¿ç”¨é»˜è®¤å›¾æ ‡ï¼‰")
                return False
        else:
            print("  âš ï¸  æ‰¾ä¸åˆ°å›¾æ ‡ç”Ÿæˆè„šæœ¬")
            print("  å°†ç»§ç»­æ‰“åŒ…ï¼ˆä½¿ç”¨é»˜è®¤å›¾æ ‡ï¼‰")
            return False
            
    def build_exe(self, mode="onefile"):
        """æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶
        
        Args:
            mode: "onefile" - å•æ–‡ä»¶æ¨¡å¼, "onedir" - æ–‡ä»¶å¤¹æ¨¡å¼
        """
        print(f"\nğŸ”¨ å¼€å§‹æ„å»º ({mode} æ¨¡å¼)...")
        
        # æ ¹æ®æ“ä½œç³»ç»Ÿè°ƒæ•´è·¯å¾„åˆ†éš”ç¬¦
        path_separator = ";" if sys.platform == "win32" else ":"
        
        # PyInstaller å‘½ä»¤
        cmd = [
            sys.executable, "-m", "PyInstaller",
            "--clean",  # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
            "--noconfirm",  # è¦†ç›–è¾“å‡ºç›®å½•
        ]
        
        # æ ¹æ®æ¨¡å¼æ·»åŠ å‚æ•°
        if mode == "onefile":
            cmd.append("--onefile")
        else:
            cmd.append("--onedir")
            
        # æ·»åŠ å…¶ä»–å‚æ•°
        cmd.extend([
            "--windowed",  # çª—å£ç¨‹åºï¼ˆæ— æ§åˆ¶å°ï¼‰
            "--name", self.app_name,
        ])
        
        # æ·»åŠ å›¾æ ‡ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
        ico_file = self.icons_dir / "app.ico"
        if ico_file.exists():
            cmd.extend(["--icon", str(ico_file)])
        
        # æ·»åŠ èµ„æºæ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
        if self.resources_dir.exists():
            cmd.extend(["--add-data", f"{self.resources_dir}{path_separator}resources"])
        
        # æ·»åŠ  src ç›®å½•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
        src_dir = self.root_dir / "src"
        if src_dir.exists():
            cmd.extend(["--add-data", f"{src_dir}{path_separator}src"])
        
        # æ·»åŠ éšè—å¯¼å…¥
        hidden_imports = [
            "PySide6.QtCore",
            "PySide6.QtGui",
            "PySide6.QtWidgets",
            "PySide6.QtWebEngineCore",
            "PySide6.QtWebEngineWidgets",
            "markdown",
            "markdown.extensions",
            "markdown.extensions.fenced_code",
            "markdown.extensions.tables",
            "markdown.extensions.nl2br",
            "markdown.extensions.attr_list",
            "markdown.extensions.def_list",
            "markdown.extensions.footnotes",
            "markdown.extensions.toc",
            "markdown.extensions.sane_lists",
            "markdown.extensions.smarty",
            "bs4",  # beautifulsoup4
        ]
        
        for imp in hidden_imports:
            cmd.extend(["--hidden-import", imp])
            
        # æ’é™¤ä¸éœ€è¦çš„æ¨¡å—
        excludes = ["tkinter", "matplotlib", "numpy", "pandas", "scipy", "test", "tests"]
        for exc in excludes:
            cmd.extend(["--exclude-module", exc])
            
        # æ·»åŠ ç‰ˆæœ¬ä¿¡æ¯æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
        version_file = self.root_dir / "version_info.txt"
        if version_file.exists() and sys.platform == "win32":
            cmd.extend(["--version-file", str(version_file)])
            
        # æ·»åŠ ä¸»è„šæœ¬
        cmd.append("main.py")
        
        # æ‰“å°å‘½ä»¤ï¼ˆç”¨äºè°ƒè¯•ï¼‰
        print(f"  æ‰§è¡Œå‘½ä»¤: {' '.join(cmd[:5])}...")  # åªæ‰“å°å‰å‡ ä¸ªå‚æ•°
        
        try:
            # æ‰§è¡Œæ‰“åŒ…
            result = subprocess.run(
                cmd,
                capture_output=True,
                text=True,
                encoding='utf-8',
                errors='replace'
            )
            
            if result.returncode == 0:
                print("  âœ“ æ„å»ºæˆåŠŸï¼")
                
                # æ£€æŸ¥è¾“å‡ºæ–‡ä»¶
                if mode == "onefile":
                    exe_path = self.dist_dir / f"{self.app_name}.exe"
                else:
                    exe_path = self.dist_dir / self.app_name / f"{self.app_name}.exe"
                    
                if exe_path.exists():
                    size_mb = exe_path.stat().st_size / 1024 / 1024
                    print(f"  âœ“ ç”Ÿæˆæ–‡ä»¶: {exe_path}")
                    print(f"  âœ“ æ–‡ä»¶å¤§å°: {size_mb:.2f} MB")
                    
                return True
            else:
                print("  âœ— æ„å»ºå¤±è´¥")
                print(f"\né”™è¯¯è¾“å‡º:\n{result.stderr}")
                
                # æä¾›å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ
                if "No module named" in result.stderr:
                    print("\nğŸ’¡ å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ:")
                    print("  1. æ£€æŸ¥æ˜¯å¦æ‰€æœ‰ä¾èµ–éƒ½å·²å®‰è£…")
                    print("  2. ç¡®ä¿åœ¨æ­£ç¡®çš„è™šæ‹Ÿç¯å¢ƒä¸­")
                    print("  3. å°è¯•é‡æ–°å®‰è£… PyInstaller: pip install --upgrade --force-reinstall pyinstaller")
                    
                return False
                
        except Exception as e:
            print(f"  âœ— æ„å»ºå‡ºé”™: {e}")
            print("\nğŸ’¡ å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ:")
            print("  1. ç¡®ä¿ PyInstaller å·²æ­£ç¡®å®‰è£…")
            print("  2. å°è¯•ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ")
            print("  3. æ£€æŸ¥é˜²ç—…æ¯’è½¯ä»¶æ˜¯å¦é˜»æ­¢äº†æ‰“åŒ…è¿‡ç¨‹")
            return False
            
    def create_installer(self):
        """åˆ›å»ºå®‰è£…åŒ…ï¼ˆå¯é€‰ï¼‰"""
        print("\nğŸ“¦ åˆ›å»ºä¾¿æºç‰ˆå‹ç¼©åŒ…...")
        
        # ç¡®å®šè¾“å‡ºæ–‡ä»¶å
        timestamp = datetime.now().strftime("%Y%m%d")
        zip_name = f"{self.app_name}_v{self.app_version}_{timestamp}.zip"
        zip_path = self.dist_dir / zip_name
        
        # æŸ¥æ‰¾exeæ–‡ä»¶
        exe_path = self.dist_dir / f"{self.app_name}.exe"
        if not exe_path.exists():
            # å¦‚æœæ˜¯æ–‡ä»¶å¤¹æ¨¡å¼
            exe_path = self.dist_dir / self.app_name / f"{self.app_name}.exe"
            
        if not exe_path.exists():
            print(f"  âœ— æ‰¾ä¸åˆ°å¯æ‰§è¡Œæ–‡ä»¶")
            return False
            
        # åˆ›å»ºå‹ç¼©åŒ…
        with zipfile.ZipFile(zip_path, 'w', zipfile.ZIP_DEFLATED) as zipf:
            if exe_path.parent == self.dist_dir:
                # å•æ–‡ä»¶æ¨¡å¼
                zipf.write(exe_path, exe_path.name)
                print(f"  æ·»åŠ : {exe_path.name}")
            else:
                # æ–‡ä»¶å¤¹æ¨¡å¼
                for file in exe_path.parent.rglob("*"):
                    if file.is_file():
                        arcname = file.relative_to(exe_path.parent.parent)
                        zipf.write(file, arcname)
                        
        print(f"  âœ“ å‹ç¼©åŒ…åˆ›å»ºæˆåŠŸ: {zip_path}")
        print(f"  å¤§å°: {zip_path.stat().st_size / 1024 / 1024:.2f} MB")
        return True
        
    def create_shortcuts(self):
        """åˆ›å»ºå¿«æ·æ–¹å¼ï¼ˆWindowsï¼‰"""
        print("\nğŸ”— åˆ›å»ºå¿«æ·æ–¹å¼...")
        
        if sys.platform != "win32":
            print("  âš ï¸  å¿«æ·æ–¹å¼ä»…æ”¯æŒ Windows ç³»ç»Ÿ")
            return False
            
        try:
            import win32com.client
            
            shell = win32com.client.Dispatch("WScript.Shell")
            
            # æ¡Œé¢å¿«æ·æ–¹å¼
            desktop = shell.SpecialFolders("Desktop")
            shortcut_path = os.path.join(desktop, f"{self.app_description}.lnk")
            
            exe_path = self.dist_dir / f"{self.app_name}.exe"
            if not exe_path.exists():
                exe_path = self.dist_dir / self.app_name / f"{self.app_name}.exe"
                
            if not exe_path.exists():
                print("  âœ— æ‰¾ä¸åˆ°å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ— æ³•åˆ›å»ºå¿«æ·æ–¹å¼")
                return False
            
            shortcut = shell.CreateShortCut(shortcut_path)
            shortcut.Targetpath = str(exe_path)
            shortcut.WorkingDirectory = str(exe_path.parent)
            
            ico_file = self.icons_dir / "app.ico"
            if ico_file.exists():
                shortcut.IconLocation = str(ico_file)
            else:
                shortcut.IconLocation = str(exe_path)
                
            shortcut.Description = self.app_description
            shortcut.save()
            
            print(f"  âœ“ æ¡Œé¢å¿«æ·æ–¹å¼åˆ›å»ºæˆåŠŸ")
            return True
            
        except ImportError:
            print("  âš ï¸  éœ€è¦ pywin32 æ¥åˆ›å»ºå¿«æ·æ–¹å¼")
            print("  è¿è¡Œ: pip install pywin32")
            return False
        except Exception as e:
            print(f"  âš ï¸  åˆ›å»ºå¿«æ·æ–¹å¼å¤±è´¥: {e}")
            return False
            
    def run(self, mode="onefile", create_zip=True, create_shortcut=False):
        """è¿è¡Œå®Œæ•´çš„æ‰“åŒ…æµç¨‹"""
        print(f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     å°çº¢ä¹¦ Markdown ç¼–è¾‘å™¨ - æ‰“åŒ…å·¥å…·      â•‘
â•‘            Version {self.app_version}              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        """)
        
        # 1. æ¸…ç†
        self.clean_build()
        
        # 2. æ£€æŸ¥ä¾èµ–
        if not self.check_requirements():
            print("\nâŒ è¯·å…ˆå®‰è£…ç¼ºå¤±çš„ä¾èµ–åŒ…")
            return False
            
        # 3. éªŒè¯ä¸»è„šæœ¬
        if not self.verify_main_script():
            print("\nâŒ ä¸»è„šæœ¬éªŒè¯å¤±è´¥")
            return False
            
        # 4. åˆ›å»ºå›¾æ ‡
        self.create_icon()
        
        # 5. æ„å»ºexe
        if not self.build_exe(mode):
            print("\nâŒ æ„å»ºå¤±è´¥")
            return False
            
        # 6. åˆ›å»ºå‹ç¼©åŒ…
        if create_zip:
            self.create_installer()
            
        # 7. åˆ›å»ºå¿«æ·æ–¹å¼
        if create_shortcut and sys.platform == "win32":
            self.create_shortcuts()
            
        # å®Œæˆ
        print(f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              âœ… æ‰“åŒ…å®Œæˆï¼                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ è¾“å‡ºç›®å½•: {self.dist_dir}
ğŸ“„ å¯æ‰§è¡Œæ–‡ä»¶: {self.app_name}.exe

è¿è¡Œæ–¹å¼:
  1. ç›´æ¥åŒå‡» {self.app_name}.exe
  2. æˆ–ä»å‘½ä»¤è¡Œè¿è¡Œ: .\\dist\\{self.app_name}.exe

æç¤º:
  - é¦–æ¬¡è¿è¡Œå¯èƒ½éœ€è¦å‡ ç§’é’ŸåŠ è½½
  - ç¡®ä¿ç³»ç»Ÿå·²å®‰è£… Microsoft Visual C++ Redistributable
  - å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ„å»ºæ—¥å¿—
        """)
        
        return True

def main():
    """ä¸»å‡½æ•°"""
    import argparse
    
    parser = argparse.ArgumentParser(description="å°çº¢ä¹¦ Markdown ç¼–è¾‘å™¨æ‰“åŒ…å·¥å…·")
    parser.add_argument(
        "--mode", 
        choices=["onefile", "onedir"], 
        default="onefile",
        help="æ‰“åŒ…æ¨¡å¼: onefile=å•æ–‡ä»¶, onedir=æ–‡ä»¶å¤¹"
    )
    parser.add_argument(
        "--no-zip",
        action="store_true",
        help="ä¸åˆ›å»ºå‹ç¼©åŒ…"
    )
    parser.add_argument(
        "--shortcut",
        action="store_true", 
        help="åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼"
    )
    parser.add_argument(
        "--debug",
        action="store_true",
        help="æ˜¾ç¤ºè¯¦ç»†è°ƒè¯•ä¿¡æ¯"
    )
    
    args = parser.parse_args()
    
    # å¦‚æœå¼€å¯è°ƒè¯•æ¨¡å¼
    if args.debug:
        import logging
        logging.basicConfig(level=logging.DEBUG)
    
    # åˆ›å»ºæ‰“åŒ…å™¨
    builder = AppBuilder()
    
    # è¿è¡Œæ‰“åŒ…
    success = builder.run(
        mode=args.mode,
        create_zip=not args.no_zip,
        create_shortcut=args.shortcut
    )
    
    sys.exit(0 if success else 1)

if __name__ == "__main__":
    main()
```
 ## é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ

### é—®é¢˜æ ¹å› 
1. **åŒ…åæ˜ å°„é”™è¯¯**ï¼šåŸè„šæœ¬ä½¿ç”¨é”™è¯¯çš„å¯¼å…¥åæ£€æŸ¥ä¾èµ–
   - `beautifulsoup4` å®é™…å¯¼å…¥åæ˜¯ `bs4`
   - `Pillow` å®é™…å¯¼å…¥åæ˜¯ `PIL`
   - `pyinstaller` å®é™…å¯¼å…¥åæ˜¯ `PyInstaller`ï¼ˆæ³¨æ„å¤§å°å†™ï¼‰

2. **ä¾èµ–æ£€æµ‹æ–¹æ³•å•ä¸€**ï¼šåªä½¿ç”¨ `__import__` å¯èƒ½æ— æ³•æ­£ç¡®æ£€æµ‹å·²å®‰è£…çš„åŒ…

### ä¸»è¦ä¿®å¤å†…å®¹

1. **æ”¹è¿›ä¾èµ–æ£€æµ‹é€»è¾‘**ï¼š
   - ä½¿ç”¨æ­£ç¡®çš„åŒ…åæ˜ å°„
   - é‡‡ç”¨å¤šç§æ£€æµ‹æ–¹æ³•ï¼ˆpkg_resourcesã€importlibã€ç›´æ¥å¯¼å…¥ï¼‰
   - ç‰¹æ®Šå¤„ç† PyInstallerï¼ˆå¯èƒ½ä½œä¸ºå‘½ä»¤è¡Œå·¥å…·å®‰è£…ï¼‰

2. **å¢å¼ºé”™è¯¯å¤„ç†**ï¼š
   - æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
   - æä¾›è§£å†³æ–¹æ¡ˆå»ºè®®
   - æ”¯æŒè°ƒè¯•æ¨¡å¼

3. **å®Œå–„é¡¹ç›®éªŒè¯**ï¼š
   - æ£€æŸ¥ä¸»è„šæœ¬æ˜¯å¦å­˜åœ¨
   - è‡ªåŠ¨åˆ›å»ºç¼ºå¤±çš„é¡¹ç›®ç»“æ„
   - éªŒè¯èµ„æºæ–‡ä»¶

4. **ä¼˜åŒ–æ‰“åŒ…è¿‡ç¨‹**ï¼š
   - è‡ªåŠ¨å¤„ç†è·¯å¾„åˆ†éš”ç¬¦ï¼ˆWindows/Linuxï¼‰
   - æ›´å¥½çš„ç¼–ç å¤„ç†ï¼ˆUTF-8ï¼‰
   - æ¸…ç† spec æ–‡ä»¶

### ä½¿ç”¨æ–¹æ³•

1. **æ›¿æ¢ build.py æ–‡ä»¶**ï¼š
   ```bash
   # å¤‡ä»½åŸæ–‡ä»¶
   copy build.py build_old.py
   
   # ä½¿ç”¨æ–°çš„ build.py
   ```

2. **è¿è¡Œæ‰“åŒ…**ï¼š
   ```bash
   # åŸºæœ¬æ‰“åŒ…ï¼ˆå•æ–‡ä»¶æ¨¡å¼ï¼‰
   python build.py
   
   # æ–‡ä»¶å¤¹æ¨¡å¼ï¼ˆå¯åŠ¨æ›´å¿«ï¼Œæ–‡ä»¶æ›´å¤šï¼‰
   python build.py --mode onedir
   
   # åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼
   python build.py --shortcut
   
   # è°ƒè¯•æ¨¡å¼ï¼ˆæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼‰
   python build.py --debug
   ```

3. **å¦‚æœä»æœ‰é—®é¢˜ï¼Œå°è¯•**ï¼š
   ```bash
   # é‡æ–°å®‰è£… PyInstaller
   pip uninstall pyinstaller
   pip install pyinstaller
   
   # ç¡®ä¿åœ¨æ­£ç¡®çš„è™šæ‹Ÿç¯å¢ƒ
   conda activate card
   
   # éªŒè¯æ‰€æœ‰ä¾èµ–
   pip list | findstr "PySide6 markdown beautifulsoup4 pyinstaller Pillow"
   ```

### é¢å¤–å»ºè®®

1. **åˆ›å»ºç®€å•çš„æµ‹è¯•è„šæœ¬**éªŒè¯ç¯å¢ƒï¼š
   ```python
   # test_env.py
   import sys
   print(f"Python: {sys.version}")
   print(f"Path: {sys.executable}")
   
   try:
       import PySide6
       print(f"âœ“ PySide6: {PySide6.__version__}")
   except: print("âœ— PySide6")
   
   try:
       import markdown
       print(f"âœ“ markdown: {markdown.__version__}")
   except: print("âœ— markdown")
   
   try:
       import bs4
       print(f"âœ“ beautifulsoup4: {bs4.__version__}")
   except: print("âœ— beautifulsoup4")
   ```

2. **ç¡®ä¿ src ç›®å½•ç»“æ„å­˜åœ¨**ï¼Œæ–°è„šæœ¬ä¼šè‡ªåŠ¨åˆ›å»ºç¼ºå¤±çš„ç›®å½•

3. **å¦‚æœé˜²ç—…æ¯’è½¯ä»¶å¹²æ‰°**ï¼Œä¸´æ—¶æ·»åŠ é¡¹ç›®ç›®å½•åˆ°ç™½åå•

ç°åœ¨åº”è¯¥å¯ä»¥æˆåŠŸæ‰“åŒ…äº†ï¼å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·å‘Šè¯‰æˆ‘å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚
